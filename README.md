Описание задания

Напишите часть, эмулирующую работу коммутатора, т.е. генерирующую CDR записи.
Условия:
1.  Во время генерации создаются CDR записи и сохраняются в локальную БД (h2);
2.  Данные генерируются в хронологическом порядке звонков, т.е. записи по одному абоненту могут прерываться записями по другому абоненту;
3.  Количество и длительность звонков определяется случайным образом;
4.  Установленный список абонентов (не менее 10) хранится в локальной БД (h2);
5.  Один прогон генерации создает записи сразу за 1 год.





CDR_SERVICE — это микросервис для обработки и генерации записи абонентов. В данном README файле будет представлена основная информация о реализованном функционале.
Основные компоненты

Контроллеры: Обрабатывают HTTP-запросы и возвращают ответы.

Проверка проводится через сервис Postman по пути localhost:8080/api/v1/CDR

localhost:8080/api/v1/CDR/save_CDR - сохранение записи

localhost:8080/api/v1/CDR/{Number} - поиск записи по номеру инициатора

localhost:8080/api/v1/CDR/update_CDR - изменение записи

localhost:8080/api/v1/CDR/delete_CDR/{Number} - удаление записи



{

    "id": 1,  
    "call": "01",
    "iniciate_Number": "79818559395",
    "accept_Number": "79112574800",
    "dateStart": "2023-10-01 12:00:00",
    "dateEnd": "2023-10-01 12:05:00"
}



Модели: Представляют собой сущности данных, такие как CallDetail, CDRcall, Subscriber и UDR.

Репозитории: Обеспечивают доступ к данным. В проекте используются in-memory репозитории, такие как InMemoryCDRcallDAO и InMemorySubcriberDAO.

Сервисы: Содержат бизнес-логику приложения.

ДЛЯ ЗАПУСКА МИКРОСЕРВИСА НЕОБХОДИМА ОТКРЫТЬ ПРОЕКТ В НУЖНОЙ СРЕДЕ И ПРОПИСАТЬ ЯВНЫЙ ПУТЬ НАХОЖДЕНИЯ ФАЙЛОВ
ИЗМЕНИТЬ ПУТЬ В КОДЕ СЕРВИСА service/DataGeneratorService 

НАХОДИМ МЕТОД generateSchemaSQL()
ИЗМЕНЯЕМ ПАРАМЕТР
String schemaFilePath = "C:/Users/choocha/Downloads/CDRPOST/CDRPOST/src/main/resources/schema.sql";

НАХОДИМ МЕТОД generateDataSQL()
ИЗМЕНЯЕМ ПАРАМЕТР
String dataFilePath = "C:/Users/choocha/Downloads/CDRPOST/CDRPOST/src/main/resources/data.sql";

Таким образом сервис определит местоположение .sql файлов и сможет их редактировать.

Где посмотреть сгенерированные данные?

1. Файл data.sql в папке resources
Файл состоит из запросов к БД
2. Консоль H2
Запускаем приложение

Вводим в браузере http://localhost:8080/h2-console

Проверяем информацию

    url: jdbc:h2:mem:testdb
   
    driverClassName: org.h2.Driver
   
    username: sa
   
    password: password

Отправляем запрос таблице CDRCALL. Желательно поставить отображение в 10000 записей. Записи генерируются случайным образом при каждом запуске микросервиса.


Также частично было реализовано задание 2.

Напишите часть, предоставляющую Rest-API для работы с UDR.
          
Условия:

1.  Требуется REST метод, который возвращает UDR запись (формат предоставлен выше) по одному переданному абоненту. В зависимости от переданных в метод параметров, UDR должен составляться либо за запрошенный месяц, либо за весь тарифицируемый период.
2.  Требуется REST метод, который возвращает UDR записи по всем нашим абонентам за запрошенный месяц.
3.  Данные можно брать только из БД.

Не реализовано получение данных из БД.

Покрытие тестами

Создан один тест для CDRcallService, но данные не вносятся в объекты или там ещё что-то происходит. Если честно сегодня крайний день, а я спал 6 часов и непонятно что там уже мокируется, а что нет...

В общем надеюсь что этот момент не критичный.


Часть с извинениями:

Надеюсь, что человеко, проверяющий данный микросервис поймёт и простит.

Было бы у меня ещё несколько дней я бы всё привёл в порядок и по оформлению и вообще структуре проекта было бы намного меньше вопросов.

Также честно, в какой-то момент запутался во вложенности классов (скорее всего по структуре проекта это уже понятно)

Основную функцию первого задания микросервис успешно выполняет и я считаю что это большое достижение для меня.

В ЛЮБОМ СЛУЧАЕ БОЛЬШОЕ СПАСИБО!!! Я НАДЕЮСЬ У ВАС СЕГОДНЯ БУДЕТ ЧУДЕСНЫЙ ДЕНЬ!!! Даже если код не такой уж и чудесный...
